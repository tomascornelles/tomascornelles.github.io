<script webc:bucket="defer">
  class TcFavicon extends HTMLElement {
    connectedCallback() {
      const link = document.querySelector("link")
      const theme = document.querySelector("meta[name=theme-color]")

      const icons = {
        '1_5': '👑',
        '1_6': '🎁',
        '6_28': '🌈',
        '8_15': '🏖️',
        '10_28': '🎃',
        '10_29': '🎃',
        '10_30': '🎃',
        '10_31': '🎃',
        '11_1': '️️⚱️',
        '12_7': '️🕯️',
        '12_16': '🎄',
        '12_17': '🎄',
        '12_18': '🎄',
        '12_19': '🎄',
        '12_20': '🎄',
        '12_21': '🎄',
        '12_22': '🎄',
        '12_23': '🎄',
        '12_24': '🎄',
        '12_25': '🎁',
        '12_26': '🍲',
        '12_31': '️🕰️',
      }

      const getToday = () => new Date();

      const currentMonth = (() => getToday().getMonth() + 1)();

      const currentDay = (() => getToday().getDate())();

      const today = `${currentMonth}_${currentDay}`

      const favicon = (() => {

        if (icons[today]){
          link.href = `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>${icons[today]}</text></svg>`;

        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          // dark mode
          link.href = `data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.41773 5.93968C4.41773 7.55568 5.55373 8.36368 7.82573 8.36368C10.1057 8.36368 11.2457 7.55568 11.2457 5.93968C11.2457 5.17968 11.1337 4.55968 10.9097 4.07968C10.0537 3.64768 9.06573 3.43168 7.94573 3.43168C6.83373 3.43168 5.96573 3.61568 5.34173 3.98368C4.72573 4.35968 4.41773 5.01168 4.41773 5.93968ZM7.78973 2.25568C9.19773 2.25568 10.2817 2.54368 11.0417 3.11968C11.8097 3.70368 12.1937 4.64768 12.1937 5.95168C12.1937 7.26368 11.8417 8.18768 11.1377 8.72368C10.4417 9.26768 9.38573 9.53968 7.96973 9.53968C6.55373 9.53968 5.45373 9.24768 4.66973 8.66368C3.88573 8.08768 3.49373 7.16368 3.49373 5.89168C3.49373 4.62768 3.85773 3.70368 4.58573 3.11968C5.31373 2.54368 6.38173 2.25568 7.78973 2.25568Z" fill="white"/><path d="M12.1097 12.6916L9.45774 12.7396C8.96974 12.7396 8.49374 12.1756 8.02974 11.0476H7.65774C7.19374 12.1756 6.71774 12.7396 6.22974 12.7396L3.57774 12.6916C3.11374 13.6036 2.83774 14.1116 2.74974 14.2156C2.56574 14.1516 2.37374 14.0676 2.17374 13.9636C2.18974 13.7716 2.39774 13.0596 2.79774 11.8276C2.83774 11.7716 2.94574 11.7076 3.12174 11.6356C3.28974 11.5636 3.40974 11.5236 3.48174 11.5156L6.09774 11.9356C6.13774 11.9116 6.34174 11.6956 6.70974 11.2876C7.08574 10.8796 7.33774 10.5996 7.46574 10.4476C7.55374 10.4076 7.69374 10.3876 7.88574 10.3876L8.22174 10.4476C8.34974 10.5996 8.59774 10.8796 8.96574 11.2876C9.34174 11.6956 9.54974 11.9116 9.58974 11.9356L12.2057 11.5156C12.2777 11.5236 12.3977 11.5636 12.5657 11.6356C12.7417 11.7076 12.8497 11.7716 12.8897 11.8276C13.2897 13.0596 13.4977 13.7716 13.5137 13.9636C13.3137 14.0676 13.1217 14.1516 12.9377 14.2156C12.8497 14.1116 12.5737 13.6036 12.1097 12.6916Z" fill="white"/></svg>
`;
          theme['content'] = "black";

        } else {
          // light mode
          link.href = `data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.41773 5.93968C4.41773 7.55568 5.55373 8.36368 7.82573 8.36368C10.1057 8.36368 11.2457 7.55568 11.2457 5.93968C11.2457 5.17968 11.1337 4.55968 10.9097 4.07968C10.0537 3.64768 9.06573 3.43168 7.94573 3.43168C6.83373 3.43168 5.96573 3.61568 5.34173 3.98368C4.72573 4.35968 4.41773 5.01168 4.41773 5.93968ZM7.78973 2.25568C9.19773 2.25568 10.2817 2.54368 11.0417 3.11968C11.8097 3.70368 12.1937 4.64768 12.1937 5.95168C12.1937 7.26368 11.8417 8.18768 11.1377 8.72368C10.4417 9.26768 9.38573 9.53968 7.96973 9.53968C6.55373 9.53968 5.45373 9.24768 4.66973 8.66368C3.88573 8.08768 3.49373 7.16368 3.49373 5.89168C3.49373 4.62768 3.85773 3.70368 4.58573 3.11968C5.31373 2.54368 6.38173 2.25568 7.78973 2.25568Z" fill="black"/><path d="M12.1097 12.6916L9.45774 12.7396C8.96974 12.7396 8.49374 12.1756 8.02974 11.0476H7.65774C7.19374 12.1756 6.71774 12.7396 6.22974 12.7396L3.57774 12.6916C3.11374 13.6036 2.83774 14.1116 2.74974 14.2156C2.56574 14.1516 2.37374 14.0676 2.17374 13.9636C2.18974 13.7716 2.39774 13.0596 2.79774 11.8276C2.83774 11.7716 2.94574 11.7076 3.12174 11.6356C3.28974 11.5636 3.40974 11.5236 3.48174 11.5156L6.09774 11.9356C6.13774 11.9116 6.34174 11.6956 6.70974 11.2876C7.08574 10.8796 7.33774 10.5996 7.46574 10.4476C7.55374 10.4076 7.69374 10.3876 7.88574 10.3876L8.22174 10.4476C8.34974 10.5996 8.59774 10.8796 8.96574 11.2876C9.34174 11.6956 9.54974 11.9116 9.58974 11.9356L12.2057 11.5156C12.2777 11.5236 12.3977 11.5636 12.5657 11.6356C12.7417 11.7076 12.8497 11.7716 12.8897 11.8276C13.2897 13.0596 13.4977 13.7716 13.5137 13.9636C13.3137 14.0676 13.1217 14.1516 12.9377 14.2156C12.8497 14.1116 12.5737 13.6036 12.1097 12.6916Z" fill="black"/>
</svg>`;

        }
      })();
    }
  }

  window.customElements.define("tc-favicon", TcFavicon);
</script>
